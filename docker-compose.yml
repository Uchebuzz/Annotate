# Docker Compose file for easy deployment
# This makes it easier to run the application with volumes

version: '3.8'

services:
  annotation-tool:
    build: .
    container_name: pidgin-annotation-tool
    ports:
      - "8501:8501"  # Map host port 8501 to container port 8501
    volumes:
      # Mount data directory so files persist (includes backups)
      - ./data:/app/data
      # Mount JSON files so they persist
      - ./users.json:/app/users.json
      - ./annotations.json:/app/annotations.json
      - ./assignments.json:/app/assignments.json
      - ./batch_assignments.json:/app/batch_assignments.json
      - ./config.json:/app/config.json
      - ./data.jsonl:/app/data.jsonl
      # Mount .git directory for cron job to push commits
      - ./.git:/app/.git
    restart: unless-stopped
    environment:
      - PYTHONUNBUFFERED=1


